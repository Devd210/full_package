<launch>
    <arg name="debug" default="false"/>
    <arg name="yaml_file" default="$(find global_planner)/config/test_planner_plugin.yaml"/>
    <arg name="gui" default="false"/>
    <arg name="sim" default="false"/>

    <env name="ROSCONSOLE_CONFIG_FILE" value="$(find global_planner)/custom_config.conf" if="$(arg debug)"/>
    
    <include file="$(find rosbot_description)/launch/rosbot_rviz_amcl.launch" if="$(arg sim)">
        <arg name="gui" value="$(arg gui)"/>
    </include>

    <node pkg="timed_roslaunch" type="timed_roslaunch.sh" args="10 $(find costmap_2d)/launch/costmap.launch" name="costmap_launcher" output="screen"/>

    <node name="planner_plugin_test" pkg="global_planner" type="test_planner_plugin" args="$(arg yaml_file)" output="screen">
        <param name="SBPL/primitive_filename" value="$(find sbpl_lattice_planner)/matlab/mprim/my_prim.mprim" />
        <rosparam command="load" file="$(find global_planner)/config/global_planner_action_server_params.yaml"/>
        <rosparam command="load" file="$(find sbpl_lattice_planner)/config/sbpl_global_params.yaml"/>
    </node>
</launch>